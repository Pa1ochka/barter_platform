# Barter Platform

**Barter Platform** — это веб-приложение на основе Django для обмена товарами между пользователями. Пользователи могут создавать объявления о товарах, которые они готовы обменять, предлагать обмены на чужие объявления, принимать или отклонять предложения, а также получать уведомления о новых событиях. Проект создан для упрощения бартерной торговли, делая процесс удобным и прозрачным.

## Основные возможности
- **Создание и управление объявлениями**: Публикуйте объявления с описанием товаров, категорией, состоянием и изображением.
- **Обмен товарами**: Предлагайте свои товары в обмен на чужие и управляйте входящими/исходящими предложениями.
- **Уведомления**: Получайте уведомления о новых предложениях обмена или изменениях статуса.
- **Фильтрация и поиск**: Ищите объявления по заголовку, описанию, категории или состоянию.
- **Аутентификация**: Регистрация, вход и выход из системы для безопасного доступа.

## Технологии
- **Backend**: Django 5.2, Python 3.12
- **Frontend**: Bootstrap 5, HTML, CSS, Font Awesome
- **База данных**: PostgreSQL
- **Хранение зависимостей**: requirements.txt

## Установка и запуск

Следуйте этим шагам, чтобы запустить проект локально.

### Требования
- Python 3.12


### Шаги
1. **Клонируйте репозиторий**:
   ```bash
   git remote add origin https://github.com/Pa1ochka/barter_platform.git
   cd barter_platform
   ```

2. **Создайте и активируйте виртуальное окружение**:
   ```bash
   python -m venv .venv
   ```
   - На Windows:
     ```bash
     .venv\Scripts\activate
     ```
   - На MacOS/Linux:
     ```bash
     source .venv/bin/activate
     ```

3. **Установите зависимости**:
   ```bash
   pip install -r requirements.txt
   ```

4. **Настройте базу данных**:
   - Для SQLite (по умолчанию) ничего не нужно.
   - Для PostgreSQL:
     - Установите PostgreSQL и создайте базу данных.
     - Обновите `settings.py`:
       ```python
       DATABASES = {
           'default': {
               'ENGINE': 'django.db.backends.postgresql',
               'NAME': 'barter_platform',
               'USER': 'ваш_пользователь',
               'PASSWORD': 'ваш_пароль',
               'HOST': 'localhost',
               'PORT': '5432',
           }
       }
       ```

5. **Примените миграции**:
   ```bash
   python manage.py migrate
   ```

6. **Создайте суперпользователя (для админки)**:
   ```bash
   python manage.py createsuperuser
   ```
   - Введите имя пользователя (например, `armen`), email и пароль.

7. **Запустите сервер**:
   ```bash
   python manage.py runserver
   ```

8. **Откройте приложение**:
   - Перейдите в браузере на `http://127.0.0.1:8000/`.
   - Войдите как суперпользователь или зарегистрируйтесь через `/register/`.

9. **Админка**:
   - Доступна на `http://127.0.0.1:8000/admin/`.
   - Используйте логин и пароль суперпользователя.

## Структура проекта
- **ads/**: Основное приложение, содержащее модели, представления, формы и шаблоны.
  - `models.py`: Модели `Ad` (объявления), `ExchangeProposal` (предложения обмена), `Notification` (уведомления).
  - `views.py`: Логика обработки запросов (список объявлений, создание, обмены, уведомления).
  - `forms.py`: Формы для создания объявлений (`AdForm`) и предложений (`ExchangeProposalForm`).
  - `templates/ads/`: HTML-шаблоны для интерфейса.
- **barter_platform/**: Основные настройки проекта (`settings.py`, `urls.py`).
- **manage.py**: Управление проектом (миграции, запуск сервера).
- **requirements.txt**: Зависимости проекта.

## Функционал и назначение функций

### 1. Аутентификация
- **Регистрация** (`/register/`):
  - Позволяет новым пользователям создать аккаунт.
  - Реализовано через стандартную форму Django `UserCreationForm`.
- **Вход** (`/login/`):
  - Аутентификация пользователей.
  - После входа перенаправляет на список объявлений (`/ads/`).
- **Выход** (`/logout/`):
  - Завершает сессию пользователя.
- **Назначение**: Обеспечивает безопасный доступ к функциям, требующим авторизации (создание объявлений, обмены).

### 2. Объявления
- **Список объявлений** (`/ads/`, шаблон `ad_list.html`):
  - Показывает все активные объявления с пагинацией.
  - Поддерживает поиск по заголовку/описанию и фильтры по категории/состоянию.
  - Авторизованные пользователи могут создавать объявления или предлагать обмен.
  - Реализовано через `AdListView` (предположительно).
- **Создание объявления** (`/ads/create/`, шаблон `ad_form.html`):
  - Форма для ввода заголовка, описания, категории, состояния и URL изображения.
  - Сохраняет объявление с привязкой к текущему пользователю (`ad.user = request.user`).
  - Использует `AdForm`.
- **Редактирование объявления** (`/ads/<id>/edit/`, шаблон `ad_form.html`):
  - Позволяет владельцу изменить данные объявления.
- **Удаление объявления** (`/ads/<id>/delete/`, шаблон `ad_delete.html`):
  - Удаляет объявление после подтверждения.
- **Детали объявления** (`/ads/<id>/`, шаблон `ad_detail.html`):
  - Показывает полную информацию об объявлении (заголовок, описание, изображение, категория, состояние).
  - Позволяет предлагать обмен (для других пользователей) или редактировать/удалять (для владельца).
- **Назначение**: Основной функционал для публикации и управления товарами, которые пользователи хотят обменять.

### 3. Обмены
- **Создание предложения обмена** (`/ads/<id>/propose/`, шаблон `exchange_proposal_form.html`):
  - Позволяет выбрать своё активное объявление и отправить предложение владельцу другого объявления.
  - Форма `ExchangeProposalForm` фильтрует только активные объявления текущего пользователя.
  - Создаёт объект `ExchangeProposal` и уведомление для получателя.
- **Список предложений** (`/ads/proposals/`, шаблон `exchange_proposal_list.html`):
  - Показывает входящие и исходящие предложения обмена.
  - Входящие предложения можно принять или отклонить.
- **Обновление статуса предложения** (`/ads/proposals/<id>/update/`, шаблон `exchange_proposal_update.html`):
  - Позволяет получателю принять (`accepted`) или отклонить (`rejected`) предложение.
  - Обновляет статус в модели `ExchangeProposal`.
- **Назначение**: Обеспечивает механизм обмена товарами между пользователями с прозрачным управлением предложениями.

### 4. Уведомления
- **Отображение уведомлений** (в `base.html`):
  - Показывает непрочитанные уведомления (`Notification.objects.filter(is_read=False)`).
  - Появляются при новых предложениях обмена или изменении статуса.
- **Очистка уведомлений** (в `base.html`):
  - Кнопка «Отметить как прочитанные» обновляет `is_read=True`.
- **Назначение**: Информирует пользователей о важных событиях (новые предложения, принятие/отклонение).

### 5. Админка
- **URL**: `/admin/`
- **Функции**:
  - Управление пользователями, объявлениями, предложениями и уведомлениями.
  - Просмотр и редактирование данных (например, установка `is_active` для объявлений).
- **Назначение**: Удобный интерфейс для администраторов, чтобы модерировать контент и устранять проблемы.

## Использование
1. **Зарегистрируйтесь** или войдите через `/register/` или `/login/`.
2. **Создайте объявление**:
   - Перейдите на `/ads/create/`.
   - Заполните форму (заголовок, описание, категория, состояние, URL изображения).
   - Сохраните и проверьте в списке `/ads/`.
3. **Найдите объявление**:
   - Используйте поиск и фильтры на `/ads/`.
   - Откройте детальную страницу (`/ads/<id>/`) и нажмите «Предложить обмен».
4. **Управляйте предложениями**:
   - На `/ads/proposals/` просмотрите входящие и исходящие предложения.
   - Примите или отклоните входящие предложения.
5. **Проверьте уведомления**:
   - В верхней части страницы (в `base.html`) следите за новыми уведомлениями.


  - Запустите тесты:
    ```bash
    coverage run manage.py test ads
    ```
  - Проверьте покрытие:
    ```bash
    coverage report
    ```


## Контакты
- Автор: Armen Barbaryan
- Email: [barbaryanarmen@bk.ru]
- GitHub: [pa1ochka](https://github.com/pa1ochka)

---
